/* ============================================================
   GLOBAL RESET & BACKGROUND
============================================================ */
*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: "Inter", system-ui, -apple-system, "Segoe UI", sans-serif;
  background: radial-gradient(circle at top, #0f172a, #020617 70%);
  color: #e5e7eb;

  height: 100vh;
  display: flex;
  flex-direction: column;
  overflow-x: hidden;
}


/* ============================================================
   FIXED LEFT SIDEBAR â€” THUMBNAILS
============================================================ */
.thumb-sidebar {
  position: fixed;
  top: 0;
  left: 0;
  width: 110px;
  height: 100vh;
  background: rgba(10,20,40,0.40);
  backdrop-filter: blur(10px);
  border-right: 1px solid rgba(255,255,255,0.15);
  padding: 12px 6px;
  overflow-y: auto;
  transition: transform 0.35s ease;
  z-index: 9999;
}

/* Collapsed (hidden) */
.thumb-sidebar.collapsed {
  transform: translateX(-120px);
}

.thumb-scroll {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.thumb-page {
  width: 95px;
  border-radius: 6px;
  overflow: hidden;
  border: 2px solid transparent;
  cursor: pointer;
  transition: 0.25s ease;
  box-shadow: 0 4px 12px rgba(0,0,0,0.35);
}

.thumb-page img {
  width: 100%;
  display: block;
}

.thumb-page:hover {
  transform: translateY(-3px);
  border-color: #3b82f6;
}

.thumb-page.active {
  border-color: #3b82f6;
  box-shadow: 0 0 12px rgba(59,130,246,0.85);
}


/* ============================================================
   THUMBNAIL TOGGLE BUTTON (Floating Arrow)
============================================================ */
.thumb-toggle {
  position: fixed;
  top: 50%;
  left: 0;
  transform: translate(-50%, -50%);
  width: 34px;
  height: 34px;
  border-radius: 50%;
  border: none;
  background: rgba(37,99,235,0.9);
  color: white;
  cursor: pointer;
  z-index: 11000;

  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;

  box-shadow: 0 0 12px rgba(37,99,235,0.6);
  transition: 0.25s ease;

  animation: blinkArrow 1.2s infinite ease-in-out;
}

.thumb-toggle:hover {
  transform: translate(-50%, -50%) scale(1.1);
}

.thumb-toggle.open i {
  transform: rotate(180deg);
  transition: 0.25s ease;
}

@keyframes blinkArrow {
  0% { opacity: 0.4; }
  50% { opacity: 1; }
  100% { opacity: 0.4; }
}


/* ============================================================
   READER WRAPPER
============================================================ */
.reader-shell {
  margin-left: 130px;
  max-width: 1240px;
  padding: 15px 20px 30px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}


/* ============================================================
   HEADER
============================================================ */
.reader-header {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 10px 18px;
  margin-bottom: 10px;
}

.back-btn {
  padding: 8px 16px;
  border-radius: 20px;
  background: rgba(255,255,255,0.08);
  color: #fff;
  text-decoration: none;
  font-size: 14px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  border: 1px solid rgba(255,255,255,0.18);
  transition: 0.25s;
}

.back-btn:hover {
  background: rgba(59,130,246,0.35);
  border-color: #3b82f6;
}

.header-title {
  text-align: right;
}

.book-title {
  font-size: 22px;
  font-weight: 700;
}

.book-byline {
  opacity: 0.7;
  font-size: 13px;
  margin-top: 2px;
}


/* ============================================================
   MAIN VIEWER AREA
============================================================ */
.reader-main {
  flex: 1;
  display: flex;
  justify-content: center;
  min-height: 0;
}

.viewer-shell {
  background: radial-gradient(circle at 0 0, #111827, #020617 70%);
  border-radius: 18px;
  border: 1px solid rgba(148,163,184,0.25);
  box-shadow: 0 22px 55px rgba(15,23,42,0.9);

  padding: 14px;
  width: 100%;
  max-width: 980px;
  display: flex;
  flex-direction: column;
  animation: fadeInUp 0.4s ease;
}


/* ============================================================
   BOOK FRAME
============================================================ */
.book-frame {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  perspective: 2000px;
}


/* ============================================================
   SPREAD (Single / Two page)
============================================================ */
.spread-shell {
  display: flex;
  align-items: center;
  justify-content: center;

  padding: 20px 25px;
  border-radius: 18px;
  background: radial-gradient(circle at 50% 0, #020617, #000000 70%);
  box-shadow: 0 18px 45px rgba(0,0,0,0.85);

  width: 100%;
  max-width: 920px;
  max-height: calc(100vh - 200px);
}

.spread--single .book-spine,
.spread--single .page-right {
  display: none;
}


/* ============================================================
   PAGE WRAPPERS
============================================================ */
.page-canvas-wrap {
  background: #fff;
  border-radius: 16px;
  overflow: hidden;

  position: relative;
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;

  box-shadow:
    0 18px 40px rgba(0,0,0,0.55),
    inset 0 0 40px rgba(0,0,0,0.06);

  max-height: calc(100vh - 220px);

  /* ðŸ”¥ Improve mobile tap area */
  touch-action: manipulation;
}

.page-left { margin-right: 12px; }
.page-right { margin-left: 12px; }

.page-left::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, rgba(0,0,0,0.22), transparent 40%);
  mix-blend-mode: multiply;
}

.page-right::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(270deg, rgba(0,0,0,0.22), transparent 40%);
  mix-blend-mode: multiply;
}

.page-canvas-wrap::after {
  content: "";
  position: absolute;
  inset: 0;
  background: url("https://www.transparenttextures.com/patterns/paper-3.png");
  opacity: 0.12;
}


/* ============================================================
   PAGE CURL
============================================================ */
.page-canvas-wrap.turning {
  animation: curlPage 0.45s cubic-bezier(.44,1.6,.66,1) forwards;
}

@keyframes curlPage {
  0%   { transform: rotateY(0deg) scale(1); }
  40%  { transform: rotateY(-60deg) scale(1.05); }
  100% { transform: rotateY(-90deg) scale(1); }
}


/* ============================================================
   PDF CANVAS
============================================================ */
canvas {
  display: block;
  width: 100% !important;
  height: auto !important;
  max-height: 100%;
}


/* ============================================================
   CONTROLS (BOTTOM)
============================================================ */
.controls-bar {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  margin-top: 14px;
  flex-wrap: wrap;
}

.ctrl-btn {
  padding: 8px 12px;
  border-radius: 999px;
  background: rgba(15,23,42,0.8);
  border: 1px solid rgba(148,163,184,0.5);
  color: #e5e7eb;
  cursor: pointer;
}

.ctrl-btn:hover {
  border-color: #3b82f6;
  background: rgba(37,99,235,0.35);
}

#pageSlider {
  width: 200px;
  accent-color: #2563eb;
}


/* ============================================================
   MOBILE IMPROVEMENTS
============================================================ */
@media (max-width: 768px) {
    
    /* Sidebar hidden ONLY via collapsed animation */
    .thumb-sidebar {
        width: 140px;                /* widened for readability */
        transform: translateX(-150px); /* starts hidden */
    }

    /* When opened (JS adds .collapsed class toggle) */
    .thumb-sidebar:not(.collapsed) {
        transform: translateX(0);
    }

    /* Toggle button position for mobile */
    .thumb-toggle {
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
    }

    .reader-shell {
        margin-left: 0 !important;
    }

    /* Larger mobile book height */
    .spread-shell {
        padding: 8px;
        max-height: calc(100vh - 120px) !important;
    }

    .page-canvas-wrap {
        max-height: calc(100vh - 140px) !important;
    }

    canvas {
        max-height: calc(100vh - 150px) !important;
    }

    .page-right,
    .book-spine {
        display: none !important;
    }

    #pageSlider {
        width: 150px;
    }
}

/* ðŸ”¹ COMPACT MOBILE THUMBNAIL LAYOUT */
@media (max-width: 768px) {

    .thumb-sidebar {
        width: 120px !important;        /* good size */
        padding: 6px 4px !important;    /* remove side padding */
    }

    .thumb-scroll {
        gap: 6px !important;            /* reduce vertical gaps */
    }

    .thumb-page {
        width: 100% !important;         /* fits sidebar width */
        height: auto !important;
        border-radius: 6px;
        overflow: hidden;

        /* ðŸ”¹ reduce border/padding for cleaner look */
        border-width: 1px !important;
        box-shadow: none !important;

        /* ðŸ”¹ remove hover animation for mobile */
        transform: none !important;
    }

    .thumb-page img {
        width: 100%;
        height: auto;
        display: block;
    }
}




/* ============================================================
   ANIMATIONS
============================================================ */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}


/* ============================================================
   SCROLLBAR STYLING
============================================================ */
::-webkit-scrollbar {
  width: 7px;
}

::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.05);
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #3b82f6, #2563eb);
  border-radius: 20px;
}
