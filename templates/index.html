<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>BookMap â€“ Explore Books by Location</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- CesiumJS CSS -->
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.115/Build/Cesium/Widgets/widgets.css" rel="stylesheet">

  <!-- Custom UI CSS -->
  <link rel="stylesheet" href="/static/css/style.css">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
  <!-- 3D Earth (background) -->
  <div id="cesiumContainer"></div>

  <!-- Top bar -->
  <header id="topBar">
    <div class="brand">
  
      <div class="brand-text">
        <span class="brand-title">BookMap</span>
        <span class="brand-sub">Explore books by location</span>
      </div>
    </div>

    <div id="searchBar">
      <i class="fa fa-search"></i>
      <input id="globalSearch" type="text"
             placeholder="Search books, authors, tags or places..."
             autocomplete="off">
    </div>

    
  </header>

  <!-- Left: Add Book panel (slides up on desktop & mobile) -->
  <aside id="addPanel" class="collapsed">
    <div class="add-panel-header">
      <div>
        <h2>Add a Book</h2>
        <p>Pin a book to a real-world location.</p>
      </div>
      <button id="addPanelToggle" type="button">
        <i class="fa fa-plus"></i>
        <span>Add Book</span>
      </button>
    </div>

    <form id="addBookForm" class="add-panel-form" enctype="multipart/form-data">
      <div class="form-row">
        <label>Title</label>
        <input name="title" required />
      </div>
      <div class="form-row">
        <label>Author</label>
        <input name="author" required />
      </div>
      <div class="form-row two">
        <div>
          <label>Year</label>
          <input name="year" type="number" min="0" />
        </div>
        <div>
          <label>Category</label>
          <input name="category" placeholder="Fantasy, Historyâ€¦" />
        </div>
      </div>
      <div class="form-row">
        <label>Tags (comma separated)</label>
        <input name="tags" placeholder="magic, novel, classic" />
      </div>
      <div class="form-row">
        <label>Cover image URL</label>
        <input name="cover_url" placeholder="https://â€¦" />
      </div>
      <div class="form-row">
        <label>PDF File</label>
        <input type="file" name="pdf_file" id="pdf_file" accept="application/pdf" />
      </div>
      <div class="form-row">
        <label>Location name (city, placeâ€¦)</label>
        <input name="place" placeholder="Chennai, Dubai, Londonâ€¦" required />
      </div>
      <div class="form-row">
        <label>Description</label>
        <textarea name="description" rows="3" placeholder="Short descriptionâ€¦"></textarea>
      </div>

      <div class="add-panel-footer">
        <button id="saveBookBtn" class="primary">
    <span class="btn-text">Save book</span>
    <span class="btn-loader"></span>
</button>

      </div>
    </form>
  </aside>

  <!-- Left Sidebar â€“ vertical Books list -->
  <aside id="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-title">
        <i class="fa fa-book"></i>
        <span>Books in Area</span>
      </div>
      <span id="bookCount">0 books</span>
    </div>

    <div class="sidebar-filters">
      <input id="tagFilter" type="text" placeholder="Filter by tagâ€¦" />
      <input id="categoryFilter" type="text" placeholder="Categoryâ€¦" />
      <button id="toggleHeatmapBtn" type="button" title="Toggle heatmap">
        <i class="fa fa-fire"></i>
      </button>
    </div>

    <!-- JS fills this -->
    <div id="bookList"></div>
  </aside>

  <!-- Bottom-right FAB to open Add Book panel -->
  <button id="addBookFab" title="Add book">
    <i class="fa fa-plus"></i>
  </button>

  <!-- Custom popup near markers -->
  <div id="bookPopup" class="custom-popup hidden">
    <div class="popup-content">
      <button id="bookPopupClose" class="popup-close">Ã—</button>
      <h3 id="ppTitle"></h3>
      <p id="ppAuthor"></p>
      <p id="ppYear"></p>
      <p id="ppLocation"></p>

      <button id="ppReadBtn" class="popup-read-btn">
        ðŸ“– Read Book
      </button>
    </div>
  </div>

  <!-- CesiumJS -->
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.115/Build/Cesium/Cesium.js"></script>

  <!-- Custom JS -->
  <script src="/static/js/main.js"></script>
</body>
</html>
